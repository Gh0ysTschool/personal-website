var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function l(e){return e()}function i(){return Object.create(null)}function o(e){e.forEach(l)}function s(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}const c="undefined"!=typeof window;let r=c?()=>window.performance.now():()=>Date.now(),u=c?e=>requestAnimationFrame(e):e;const f=new Set;function h(e){f.forEach((t=>{t.c(e)||(f.delete(t),t.f())})),0!==f.size&&u(h)}function p(e){let t;return 0===f.size&&u(h),{promise:new Promise((n=>{f.add(t={c:e,f:n})})),abort(){f.delete(t)}}}function d(e,t){e.appendChild(t)}function g(e,t,n){e.insertBefore(t,n||null)}function m(e){e.parentNode.removeChild(e)}function y(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function $(e){return document.createElement(e)}function k(e){return document.createTextNode(e)}function v(){return k("")}function b(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function _(e,t,n){e.classList[n?"add":"remove"](t)}function C(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}const O=new Set;let j,B=0;function R(e,t,n,l,i,o,s,a=0){const c=16.666/l;let r="{\n";for(let e=0;e<=1;e+=c){const l=t+(n-t)*o(e);r+=100*e+`%{${s(l,1-l)}}\n`}const u=r+`100% {${s(n,1-n)}}\n}`,f=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,h=e.ownerDocument;O.add(h);const p=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild($("style")).sheet),d=h.__svelte_rules||(h.__svelte_rules={});d[f]||(d[f]=!0,p.insertRule(`@keyframes ${f} ${u}`,p.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?g+", ":""}${f} ${l}ms linear ${i}ms 1 both`,B+=1,f}function z(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-l.length;i&&(e.style.animation=l.join(", "),B-=i,B||u((()=>{B||(O.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),O.clear())})))}function S(n,l,i,o){if(!l)return e;const s=n.getBoundingClientRect();if(l.left===s.left&&l.right===s.right&&l.top===s.top&&l.bottom===s.bottom)return e;const{delay:a=0,duration:c=300,easing:u=t,start:f=r()+a,end:h=f+c,tick:d=e,css:g}=i(n,{from:l,to:s},o);let m,y=!0,$=!1;function k(){g&&z(n,m),y=!1}return p((e=>{if(!$&&e>=f&&($=!0),$&&e>=h&&(d(1,0),k()),!y)return!1;if($){const t=0+1*u((e-f)/c);d(t,1-t)}return!0})),g&&(m=R(n,0,1,c,a,u,g)),a||($=!0),d(0,1),k}function q(e){const t=getComputedStyle(e);if("absolute"!==t.position&&"fixed"!==t.position){const{width:n,height:l}=t,i=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=l,E(e,i)}}function E(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const l=getComputedStyle(e),i="none"===l.transform?"":l.transform;e.style.transform=`${i} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}function A(e){j=e}function M(){if(!j)throw new Error("Function called outside component initialization");return j}function N(e){M().$$.on_mount.push(e)}function T(){const e=M();return(t,n)=>{const l=e.$$.callbacks[t];if(l){const i=C(t,n);l.slice().forEach((t=>{t.call(e,i)}))}}}const D=[],P=[],H=[],F=[],Y=Promise.resolve();let G=!1;function U(e){H.push(e)}let K=!1;const L=new Set;function I(){if(!K){K=!0;do{for(let e=0;e<D.length;e+=1){const t=D[e];A(t),W(t.$$)}for(A(null),D.length=0;P.length;)P.pop()();for(let e=0;e<H.length;e+=1){const t=H[e];L.has(t)||(L.add(t),t())}H.length=0}while(D.length);for(;F.length;)F.pop()();G=!1,K=!1,L.clear()}}function W(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(U)}}let Z;function J(){return Z||(Z=Promise.resolve(),Z.then((()=>{Z=null}))),Z}function Q(e,t,n){e.dispatchEvent(C(`${t?"intro":"outro"}${n}`))}const V=new Set;let X;function ee(){X={r:0,c:[],p:X}}function te(){X.r||o(X.c),X=X.p}function ne(e,t){e&&e.i&&(V.delete(e),e.i(t))}function le(e,t,n,l){if(e&&e.o){if(V.has(e))return;V.add(e),X.c.push((()=>{V.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}}const ie={duration:0};function oe(n,l,i){let o,a,c=l(n,i),u=!1,f=0;function h(){o&&z(n,o)}function d(){const{delay:l=0,duration:i=300,easing:s=t,tick:d=e,css:g}=c||ie;g&&(o=R(n,0,1,i,l,s,g,f++)),d(0,1);const m=r()+l,y=m+i;a&&a.abort(),u=!0,U((()=>Q(n,!0,"start"))),a=p((e=>{if(u){if(e>=y)return d(1,0),Q(n,!0,"end"),h(),u=!1;if(e>=m){const t=s((e-m)/i);d(t,1-t)}}return u}))}let g=!1;return{start(){g||(z(n),s(c)?(c=c(),J().then(d)):d())},invalidate(){g=!1},end(){u&&(h(),u=!1)}}}function se(n,l,i){let a,c=l(n,i),u=!0;const f=X;function h(){const{delay:l=0,duration:i=300,easing:s=t,tick:h=e,css:d}=c||ie;d&&(a=R(n,1,0,i,l,s,d));const g=r()+l,m=g+i;U((()=>Q(n,!1,"start"))),p((e=>{if(u){if(e>=m)return h(0,1),Q(n,!1,"end"),--f.r||o(f.c),!1;if(e>=g){const t=s((e-g)/i);h(1-t,t)}}return u}))}return f.r+=1,s(c)?J().then((()=>{c=c(),h()})):h(),{end(e){e&&c.tick&&c.tick(1,0),u&&(a&&z(n,a),u=!1)}}}const ae="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function ce(e,t){e.f(),function(e,t){le(e,1,1,(()=>{t.delete(e.key)}))}(e,t)}function re(e,t,n,l,i,o,s,a,c,r,u,f){let h=e.length,p=o.length,d=h;const g={};for(;d--;)g[e[d].key]=d;const m=[],y=new Map,$=new Map;for(d=p;d--;){const e=f(i,o,d),a=n(e);let c=s.get(a);c?l&&c.p(e,t):(c=r(a,e),c.c()),y.set(a,m[d]=c),a in g&&$.set(a,Math.abs(d-g[a]))}const k=new Set,v=new Set;function b(e){ne(e,1),e.m(a,u),s.set(e.key,e),u=e.first,p--}for(;h&&p;){const t=m[p-1],n=e[h-1],l=t.key,i=n.key;t===n?(u=t.first,h--,p--):y.has(i)?!s.has(l)||k.has(l)?b(t):v.has(i)?h--:$.get(l)>$.get(i)?(v.add(l),b(t)):(k.add(i),h--):(c(n,s),h--)}for(;h--;){const t=e[h];y.has(t.key)||c(t,s)}for(;p;)b(m[p-1]);return m}function ue(e){e&&e.c()}function fe(e,t,n){const{fragment:i,on_mount:a,on_destroy:c,after_update:r}=e.$$;i&&i.m(t,n),U((()=>{const t=a.map(l).filter(s);c?c.push(...t):o(t),e.$$.on_mount=[]})),r.forEach(U)}function he(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function pe(e,t){-1===e.$$.dirty[0]&&(D.push(e),G||(G=!0,Y.then(I)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function de(t,n,l,s,a,c,r=[-1]){const u=j;A(t);const f=n.props||{},h=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:a,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:i(),dirty:r,skip_bound:!1};let p=!1;if(h.ctx=l?l(t,f,((e,n,...l)=>{const i=l.length?l[0]:n;return h.ctx&&a(h.ctx[e],h.ctx[e]=i)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](i),p&&pe(t,e)),n})):[],h.update(),p=!0,o(h.before_update),h.fragment=!!s&&s(h.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);h.fragment&&h.fragment.l(e),e.forEach(m)}else h.fragment&&h.fragment.c();n.intro&&ne(t.$$.fragment),fe(t,n.target,n.anchor),I()}A(u)}class ge{$destroy(){he(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function me(t){let n,l,i;return{c(){n=$("div"),w(n,"class","unit svelte-exeyc"),_(n,"gate",t[2])},m(e,o){g(e,n,o),t[5](n),l||(i=b(n,"click",t[1]),l=!0)},p(e,[t]){4&t&&_(n,"gate",e[2])},i:e,o:e,d(e){e&&m(n),t[5](null),l=!1,i()}}}function ye(e,t,n){let l,{choose:i}=t,{unit:o={owner:{faction:{color:"black"}}}}=(T(),t);N((e=>{n(0,l.style.background=o.owner.faction.color,l)}));let s=o.gate;return e.$$set=e=>{"choose"in e&&n(3,i=e.choose),"unit"in e&&n(4,o=e.unit)},[l,e=>{e.stopPropagation(),i("unit",o)},s,i,o,function(e){P[e?"unshift":"push"]((()=>{l=e,n(0,l)}))}]}class $e extends ge{constructor(e){super(),de(this,e,ye,me,a,{choose:3,unit:4})}}function ke(e){const t=e-1;return t*t*t+1}function ve(e){return--e*e*e*e*e+1}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function be(e){var{fallback:t}=e,l=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(l=Object.getOwnPropertySymbols(e);i<l.length;i++)t.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(n[l[i]]=e[l[i]])}return n}(e,["fallback"]);const i=new Map,o=new Map;function a(e,i,o){return(a,c)=>(e.set(c.key,{rect:a.getBoundingClientRect()}),()=>{if(i.has(c.key)){const{rect:e}=i.get(c.key);return i.delete(c.key),function(e,t,i){const{delay:o=0,duration:a=(e=>30*Math.sqrt(e)),easing:c=ke}=n(n({},l),i),r=t.getBoundingClientRect(),u=e.left-r.left,f=e.top-r.top,h=e.width/r.width,p=e.height/r.height,d=Math.sqrt(u*u+f*f),g=getComputedStyle(t),m="none"===g.transform?"":g.transform,y=+g.opacity;return{delay:o,duration:s(a)?a(d):a,easing:c,css:(e,t)=>`\n\t\t\t\topacity: ${e*y};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${m} translate(${t*u}px,${t*f}px) scale(${e+(1-e)*h}, ${e+(1-e)*p});\n\t\t\t`}}(e,a,c)}return e.delete(c.key),t&&t(a,c,o)})}return[a(o,i,!1),a(i,o,!0)]}function we(e,t,n){const l=getComputedStyle(e),i="none"===l.transform?"":l.transform,o=t.from.width/e.clientWidth,a=t.from.height/e.clientHeight,c=(t.from.left-t.to.left)/o,r=(t.from.top-t.to.top)/a,u=Math.sqrt(c*c+r*r),{delay:f=0,duration:h=(e=>120*Math.sqrt(e)),easing:p=ke}=n;return{delay:f,duration:s(h)?h(u):h,easing:p,css:(e,t)=>`transform: ${i} translate(${t*c}px, ${t*r}px);`}}const{Map:xe}=ae;function _e(e,t,n){const l=e.slice();return l[41]=t[n],l}function Ce(e,t,n){const l=e.slice();return l[41]=t[n],l}function Oe(e,t,n){const l=e.slice();return l[41]=t[n],l}function je(e,t,n){const l=e.slice();return l[41]=t[n],l}function Be(e,t,n){const l=e.slice();return l[41]=t[n],l}function Re(e,t,n){const l=e.slice();return l[41]=t[n],l}function ze(e,t,n){const l=e.slice();return l[41]=t[n],l}function Se(e,t,n){const l=e.slice();return l[41]=t[n],l}function qe(e,t,n){const l=e.slice();return l[41]=t[n],l}function Ee(e,t,n){const l=e.slice();return l[41]=t[n],l}function Ae(e,t,n){const l=e.slice();return l[41]=t[n],l}function Me(e,t,n){const l=e.slice();return l[41]=t[n],l}function Ne(e,t,n){const l=e.slice();return l[41]=t[n],l}function Te(e,t,n){const l=e.slice();return l[41]=t[n],l}function De(e,t,n){const l=e.slice();return l[41]=t[n],l}function Pe(e,t,n){const l=e.slice();return l[41]=t[n],l}function He(e,t,n){const l=e.slice();return l[41]=t[n],l}function Fe(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function Ye(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function Ge(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function Ue(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function Ke(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function Le(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function Ie(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function We(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function Ze(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function Je(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function Qe(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function Ve(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function Xe(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function et(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function tt(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function nt(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function lt(t,n){let l,i,o,s,a,c,r=e;return i=new $e({props:{unit:n[41],choose:n[1]}}),{key:t,first:null,c(){l=$("div"),ue(i.$$.fragment),this.first=l},m(e,t){g(e,l,t),fe(i,l,null),c=!0},p(e,t){n=e;const l={};1&t[0]&&(l.unit=n[41]),2&t[0]&&(l.choose=n[1]),i.$set(l)},r(){a=l.getBoundingClientRect()},f(){q(l),r(),E(l,a)},a(){r(),r=S(l,a,we,{duration:200})},i(e){c||(ne(i.$$.fragment,e),U((()=>{s&&s.end(1),o||(o=oe(l,n[21],{key:n[41].id})),o.start()})),c=!0)},o(e){le(i.$$.fragment,e),o&&o.invalidate(),s=se(l,n[20],{key:n[41].id}),c=!1},d(e){e&&m(l),he(i),e&&s&&s.end()}}}function it(e){let t,n,l,i,s,a,c,r,u,f,h,p,y,k,v,x,_,C,O,j,B,R,z=[],S=new xe,q=[],E=new xe,A=[],M=new xe,N=[],T=new xe,D=[],P=new xe,H=[],F=new xe,Y=[],G=new xe,U=[],K=new xe,L=[],I=new xe,W=[],Z=new xe,J=[],Q=new xe,V=[],X=new xe,ie=[],oe=new xe,se=[],ae=new xe,ue=[],fe=new xe,he=[],pe=new xe,de=[],ge=new xe,me=e[0].filter(ot);const ye=e=>e[41].id;for(let t=0;t<me.length;t+=1){let n=He(e,me,t),l=ye(n);S.set(l,z[t]=Fe(l,n))}let $e=e[0].filter(st);const ke=e=>e[41].id;for(let t=0;t<$e.length;t+=1){let n=Pe(e,$e,t),l=ke(n);E.set(l,q[t]=Ye(l,n))}let ve=e[0].filter(at);const be=e=>e[41].id;for(let t=0;t<ve.length;t+=1){let n=De(e,ve,t),l=be(n);M.set(l,A[t]=Ge(l,n))}let we=e[0].filter(ct);const it=e=>e[41].id;for(let t=0;t<we.length;t+=1){let n=Te(e,we,t),l=it(n);T.set(l,N[t]=Ue(l,n))}let wt=e[0].filter(rt);const xt=e=>e[41].id;for(let t=0;t<wt.length;t+=1){let n=Ne(e,wt,t),l=xt(n);P.set(l,D[t]=Ke(l,n))}let _t=e[0].filter(ut);const Ct=e=>e[41].id;for(let t=0;t<_t.length;t+=1){let n=Me(e,_t,t),l=Ct(n);F.set(l,H[t]=Le(l,n))}let Ot=e[0].filter(ft);const jt=e=>e[41].id;for(let t=0;t<Ot.length;t+=1){let n=Ae(e,Ot,t),l=jt(n);G.set(l,Y[t]=Ie(l,n))}let Bt=e[0].filter(ht);const Rt=e=>e[41].id;for(let t=0;t<Bt.length;t+=1){let n=Ee(e,Bt,t),l=Rt(n);K.set(l,U[t]=We(l,n))}let zt=e[0].filter(pt);const St=e=>e[41].id;for(let t=0;t<zt.length;t+=1){let n=qe(e,zt,t),l=St(n);I.set(l,L[t]=Ze(l,n))}let qt=e[0].filter(dt);const Et=e=>e[41].id;for(let t=0;t<qt.length;t+=1){let n=Se(e,qt,t),l=Et(n);Z.set(l,W[t]=Je(l,n))}let At=e[0].filter(gt);const Mt=e=>e[41].id;for(let t=0;t<At.length;t+=1){let n=ze(e,At,t),l=Mt(n);Q.set(l,J[t]=Qe(l,n))}let Nt=e[0].filter(mt);const Tt=e=>e[41].id;for(let t=0;t<Nt.length;t+=1){let n=Re(e,Nt,t),l=Tt(n);X.set(l,V[t]=Ve(l,n))}let Dt=e[0].filter(yt);const Pt=e=>e[41].id;for(let t=0;t<Dt.length;t+=1){let n=Be(e,Dt,t),l=Pt(n);oe.set(l,ie[t]=Xe(l,n))}let Ht=e[0].filter($t);const Ft=e=>e[41].id;for(let t=0;t<Ht.length;t+=1){let n=je(e,Ht,t),l=Ft(n);ae.set(l,se[t]=et(l,n))}let Yt=e[0].filter(kt);const Gt=e=>e[41].id;for(let t=0;t<Yt.length;t+=1){let n=Oe(e,Yt,t),l=Gt(n);fe.set(l,ue[t]=tt(l,n))}let Ut=e[0].filter(vt);const Kt=e=>e[41].id;for(let t=0;t<Ut.length;t+=1){let n=Ce(e,Ut,t),l=Kt(n);pe.set(l,he[t]=nt(l,n))}let Lt=e[0].filter(bt);const It=e=>e[41].id;for(let t=0;t<Lt.length;t+=1){let n=_e(e,Lt,t),l=It(n);ge.set(l,de[t]=lt(l,n))}return{c(){t=$("div"),n=$("div");for(let e=0;e<z.length;e+=1)z[e].c();l=$("div");for(let e=0;e<q.length;e+=1)q[e].c();i=$("div");for(let e=0;e<A.length;e+=1)A[e].c();s=$("div");for(let e=0;e<N.length;e+=1)N[e].c();a=$("div");for(let e=0;e<D.length;e+=1)D[e].c();c=$("div");for(let e=0;e<H.length;e+=1)H[e].c();r=$("div");for(let e=0;e<Y.length;e+=1)Y[e].c();u=$("div");for(let e=0;e<U.length;e+=1)U[e].c();f=$("div");for(let e=0;e<L.length;e+=1)L[e].c();h=$("div");for(let e=0;e<W.length;e+=1)W[e].c();p=$("div");for(let e=0;e<J.length;e+=1)J[e].c();y=$("div");for(let e=0;e<V.length;e+=1)V[e].c();k=$("div");for(let e=0;e<ie.length;e+=1)ie[e].c();v=$("div");for(let e=0;e<se.length;e+=1)se[e].c();x=$("div");for(let e=0;e<ue.length;e+=1)ue[e].c();_=$("div");for(let e=0;e<he.length;e+=1)he[e].c();C=$("div");for(let e=0;e<de.length;e+=1)de[e].c();O=$("div"),w(n,"class","l arcticocean svelte-1dtyzdh"),w(n,"name","arcticocean"),w(l,"class","l northpacific svelte-1dtyzdh"),w(l,"name","northpacific"),w(i,"class","l northamerica svelte-1dtyzdh"),w(i,"name","northamerica"),w(s,"class","l northatlantic svelte-1dtyzdh"),w(s,"name","northatlantic"),w(a,"class","l scandinavia svelte-1dtyzdh"),w(a,"name","scandinavia"),w(c,"class","l europe svelte-1dtyzdh"),w(c,"name","europe"),w(r,"class","l northasia svelte-1dtyzdh"),w(r,"name","northasia"),w(u,"class","l southamerica svelte-1dtyzdh"),w(u,"name","southamerica"),w(f,"class","l southasia svelte-1dtyzdh"),w(f,"name","southasia"),w(h,"class","l arabia svelte-1dtyzdh"),w(h,"name","arabia"),w(p,"class","l westafrica svelte-1dtyzdh"),w(p,"name","westafrica"),w(y,"class","l indianocean svelte-1dtyzdh"),w(y,"name","indianocean"),w(k,"class","l eastafrica svelte-1dtyzdh"),w(k,"name","eastafrica"),w(v,"class","l antarctica svelte-1dtyzdh"),w(v,"name","antarctica"),w(x,"class","l southatlantic svelte-1dtyzdh"),w(x,"name","southatlantic"),w(_,"class","l southpacific svelte-1dtyzdh"),w(_,"name","southpacific"),w(C,"class","l australia svelte-1dtyzdh"),w(C,"name","australia"),w(t,"class","grid2 svelte-1dtyzdh"),w(O,"class","grid svelte-1dtyzdh")},m(o,m){g(o,t,m),d(t,n);for(let e=0;e<z.length;e+=1)z[e].m(n,null);e[23](n),d(t,l);for(let e=0;e<q.length;e+=1)q[e].m(l,null);e[24](l),d(t,i);for(let e=0;e<A.length;e+=1)A[e].m(i,null);e[25](i),d(t,s);for(let e=0;e<N.length;e+=1)N[e].m(s,null);e[26](s),d(t,a);for(let e=0;e<D.length;e+=1)D[e].m(a,null);e[27](a),d(t,c);for(let e=0;e<H.length;e+=1)H[e].m(c,null);e[28](c),d(t,r);for(let e=0;e<Y.length;e+=1)Y[e].m(r,null);e[29](r),d(t,u);for(let e=0;e<U.length;e+=1)U[e].m(u,null);e[30](u),d(t,f);for(let e=0;e<L.length;e+=1)L[e].m(f,null);e[31](f),d(t,h);for(let e=0;e<W.length;e+=1)W[e].m(h,null);e[32](h),d(t,p);for(let e=0;e<J.length;e+=1)J[e].m(p,null);e[33](p),d(t,y);for(let e=0;e<V.length;e+=1)V[e].m(y,null);e[34](y),d(t,k);for(let e=0;e<ie.length;e+=1)ie[e].m(k,null);e[35](k),d(t,v);for(let e=0;e<se.length;e+=1)se[e].m(v,null);e[36](v),d(t,x);for(let e=0;e<ue.length;e+=1)ue[e].m(x,null);e[37](x),d(t,_);for(let e=0;e<he.length;e+=1)he[e].m(_,null);e[38](_),d(t,C);for(let e=0;e<de.length;e+=1)de[e].m(C,null);e[39](C),g(o,O,m),j=!0,B||(R=[b(n,"click",e[19]),b(l,"click",e[19]),b(i,"click",e[19]),b(s,"click",e[19]),b(a,"click",e[19]),b(c,"click",e[19]),b(r,"click",e[19]),b(u,"click",e[19]),b(f,"click",e[19]),b(h,"click",e[19]),b(p,"click",e[19]),b(y,"click",e[19]),b(k,"click",e[19]),b(v,"click",e[19]),b(x,"click",e[19]),b(_,"click",e[19]),b(C,"click",e[19])],B=!0)},p(e,t){if(3&t[0]){const l=e[0].filter(ot);ee();for(let e=0;e<z.length;e+=1)z[e].r();z=re(z,t,ye,1,e,l,S,n,ce,Fe,null,He);for(let e=0;e<z.length;e+=1)z[e].a();te()}if(3&t[0]){const n=e[0].filter(st);ee();for(let e=0;e<q.length;e+=1)q[e].r();q=re(q,t,ke,1,e,n,E,l,ce,Ye,null,Pe);for(let e=0;e<q.length;e+=1)q[e].a();te()}if(3&t[0]){const n=e[0].filter(at);ee();for(let e=0;e<A.length;e+=1)A[e].r();A=re(A,t,be,1,e,n,M,i,ce,Ge,null,De);for(let e=0;e<A.length;e+=1)A[e].a();te()}if(3&t[0]){const n=e[0].filter(ct);ee();for(let e=0;e<N.length;e+=1)N[e].r();N=re(N,t,it,1,e,n,T,s,ce,Ue,null,Te);for(let e=0;e<N.length;e+=1)N[e].a();te()}if(3&t[0]){const n=e[0].filter(rt);ee();for(let e=0;e<D.length;e+=1)D[e].r();D=re(D,t,xt,1,e,n,P,a,ce,Ke,null,Ne);for(let e=0;e<D.length;e+=1)D[e].a();te()}if(3&t[0]){const n=e[0].filter(ut);ee();for(let e=0;e<H.length;e+=1)H[e].r();H=re(H,t,Ct,1,e,n,F,c,ce,Le,null,Me);for(let e=0;e<H.length;e+=1)H[e].a();te()}if(3&t[0]){const n=e[0].filter(ft);ee();for(let e=0;e<Y.length;e+=1)Y[e].r();Y=re(Y,t,jt,1,e,n,G,r,ce,Ie,null,Ae);for(let e=0;e<Y.length;e+=1)Y[e].a();te()}if(3&t[0]){const n=e[0].filter(ht);ee();for(let e=0;e<U.length;e+=1)U[e].r();U=re(U,t,Rt,1,e,n,K,u,ce,We,null,Ee);for(let e=0;e<U.length;e+=1)U[e].a();te()}if(3&t[0]){const n=e[0].filter(pt);ee();for(let e=0;e<L.length;e+=1)L[e].r();L=re(L,t,St,1,e,n,I,f,ce,Ze,null,qe);for(let e=0;e<L.length;e+=1)L[e].a();te()}if(3&t[0]){const n=e[0].filter(dt);ee();for(let e=0;e<W.length;e+=1)W[e].r();W=re(W,t,Et,1,e,n,Z,h,ce,Je,null,Se);for(let e=0;e<W.length;e+=1)W[e].a();te()}if(3&t[0]){const n=e[0].filter(gt);ee();for(let e=0;e<J.length;e+=1)J[e].r();J=re(J,t,Mt,1,e,n,Q,p,ce,Qe,null,ze);for(let e=0;e<J.length;e+=1)J[e].a();te()}if(3&t[0]){const n=e[0].filter(mt);ee();for(let e=0;e<V.length;e+=1)V[e].r();V=re(V,t,Tt,1,e,n,X,y,ce,Ve,null,Re);for(let e=0;e<V.length;e+=1)V[e].a();te()}if(3&t[0]){const n=e[0].filter(yt);ee();for(let e=0;e<ie.length;e+=1)ie[e].r();ie=re(ie,t,Pt,1,e,n,oe,k,ce,Xe,null,Be);for(let e=0;e<ie.length;e+=1)ie[e].a();te()}if(3&t[0]){const n=e[0].filter($t);ee();for(let e=0;e<se.length;e+=1)se[e].r();se=re(se,t,Ft,1,e,n,ae,v,ce,et,null,je);for(let e=0;e<se.length;e+=1)se[e].a();te()}if(3&t[0]){const n=e[0].filter(kt);ee();for(let e=0;e<ue.length;e+=1)ue[e].r();ue=re(ue,t,Gt,1,e,n,fe,x,ce,tt,null,Oe);for(let e=0;e<ue.length;e+=1)ue[e].a();te()}if(3&t[0]){const n=e[0].filter(vt);ee();for(let e=0;e<he.length;e+=1)he[e].r();he=re(he,t,Kt,1,e,n,pe,_,ce,nt,null,Ce);for(let e=0;e<he.length;e+=1)he[e].a();te()}if(3&t[0]){const n=e[0].filter(bt);ee();for(let e=0;e<de.length;e+=1)de[e].r();de=re(de,t,It,1,e,n,ge,C,ce,lt,null,_e);for(let e=0;e<de.length;e+=1)de[e].a();te()}},i(e){if(!j){for(let e=0;e<me.length;e+=1)ne(z[e]);for(let e=0;e<$e.length;e+=1)ne(q[e]);for(let e=0;e<ve.length;e+=1)ne(A[e]);for(let e=0;e<we.length;e+=1)ne(N[e]);for(let e=0;e<wt.length;e+=1)ne(D[e]);for(let e=0;e<_t.length;e+=1)ne(H[e]);for(let e=0;e<Ot.length;e+=1)ne(Y[e]);for(let e=0;e<Bt.length;e+=1)ne(U[e]);for(let e=0;e<zt.length;e+=1)ne(L[e]);for(let e=0;e<qt.length;e+=1)ne(W[e]);for(let e=0;e<At.length;e+=1)ne(J[e]);for(let e=0;e<Nt.length;e+=1)ne(V[e]);for(let e=0;e<Dt.length;e+=1)ne(ie[e]);for(let e=0;e<Ht.length;e+=1)ne(se[e]);for(let e=0;e<Yt.length;e+=1)ne(ue[e]);for(let e=0;e<Ut.length;e+=1)ne(he[e]);for(let e=0;e<Lt.length;e+=1)ne(de[e]);j=!0}},o(e){for(let e=0;e<z.length;e+=1)le(z[e]);for(let e=0;e<q.length;e+=1)le(q[e]);for(let e=0;e<A.length;e+=1)le(A[e]);for(let e=0;e<N.length;e+=1)le(N[e]);for(let e=0;e<D.length;e+=1)le(D[e]);for(let e=0;e<H.length;e+=1)le(H[e]);for(let e=0;e<Y.length;e+=1)le(Y[e]);for(let e=0;e<U.length;e+=1)le(U[e]);for(let e=0;e<L.length;e+=1)le(L[e]);for(let e=0;e<W.length;e+=1)le(W[e]);for(let e=0;e<J.length;e+=1)le(J[e]);for(let e=0;e<V.length;e+=1)le(V[e]);for(let e=0;e<ie.length;e+=1)le(ie[e]);for(let e=0;e<se.length;e+=1)le(se[e]);for(let e=0;e<ue.length;e+=1)le(ue[e]);for(let e=0;e<he.length;e+=1)le(he[e]);for(let e=0;e<de.length;e+=1)le(de[e]);j=!1},d(n){n&&m(t);for(let e=0;e<z.length;e+=1)z[e].d();e[23](null);for(let e=0;e<q.length;e+=1)q[e].d();e[24](null);for(let e=0;e<A.length;e+=1)A[e].d();e[25](null);for(let e=0;e<N.length;e+=1)N[e].d();e[26](null);for(let e=0;e<D.length;e+=1)D[e].d();e[27](null);for(let e=0;e<H.length;e+=1)H[e].d();e[28](null);for(let e=0;e<Y.length;e+=1)Y[e].d();e[29](null);for(let e=0;e<U.length;e+=1)U[e].d();e[30](null);for(let e=0;e<L.length;e+=1)L[e].d();e[31](null);for(let e=0;e<W.length;e+=1)W[e].d();e[32](null);for(let e=0;e<J.length;e+=1)J[e].d();e[33](null);for(let e=0;e<V.length;e+=1)V[e].d();e[34](null);for(let e=0;e<ie.length;e+=1)ie[e].d();e[35](null);for(let e=0;e<se.length;e+=1)se[e].d();e[36](null);for(let e=0;e<ue.length;e+=1)ue[e].d();e[37](null);for(let e=0;e<he.length;e+=1)he[e].d();e[38](null);for(let e=0;e<de.length;e+=1)de[e].d();e[39](null),n&&m(O),B=!1,o(R)}}}const ot=e=>"arcticocean"==e.place,st=e=>"northpacific"==e.place,at=e=>"northamerica"==e.place,ct=e=>"northatlantic"==e.place,rt=e=>"scandinavia"==e.place,ut=e=>"europe"==e.place,ft=e=>"northasia"==e.place,ht=e=>"southamerica"==e.place,pt=e=>"southasia"==e.place,dt=e=>"arabia"==e.place,gt=e=>"westafrica"==e.place,mt=e=>"indianocean"==e.place,yt=e=>"eastafrica"==e.place,$t=e=>"antarctica"==e.place,kt=e=>"southatlantic"==e.place,vt=e=>"southpacific"==e.place,bt=e=>"australia"==e.place;function wt(e,t,n){let{units:l=[]}=t,{choose:i}=t;N((e=>{}));T();let o,s,a,c,r,u,f,h,p,d,g,m,y,$,k,v,b,{places:w={}}=t;const[x,_]=be({duration:e=>Math.sqrt(200*e),fallback(e,t){const n=getComputedStyle(e),l="none"===n.transform?"":n.transform;return{duration:600,easing:ve,css:e=>`\n\t\t\t\t\ttransform: ${l} scale(${e});\n\t\t\t\t\topacity: ${e}\n\t\t\t\t`}}});return e.$$set=e=>{"units"in e&&n(0,l=e.units),"choose"in e&&n(1,i=e.choose),"places"in e&&n(22,w=e.places)},[l,i,o,s,a,c,r,u,f,h,p,d,g,m,y,$,k,v,b,e=>i("place",e.target.getAttribute("name")),x,_,w,function(e){P[e?"unshift":"push"]((()=>{o=e,n(2,o)}))},function(e){P[e?"unshift":"push"]((()=>{s=e,n(3,s)}))},function(e){P[e?"unshift":"push"]((()=>{a=e,n(4,a)}))},function(e){P[e?"unshift":"push"]((()=>{c=e,n(5,c)}))},function(e){P[e?"unshift":"push"]((()=>{r=e,n(6,r)}))},function(e){P[e?"unshift":"push"]((()=>{u=e,n(7,u)}))},function(e){P[e?"unshift":"push"]((()=>{f=e,n(8,f)}))},function(e){P[e?"unshift":"push"]((()=>{h=e,n(9,h)}))},function(e){P[e?"unshift":"push"]((()=>{p=e,n(10,p)}))},function(e){P[e?"unshift":"push"]((()=>{d=e,n(11,d)}))},function(e){P[e?"unshift":"push"]((()=>{g=e,n(12,g)}))},function(e){P[e?"unshift":"push"]((()=>{m=e,n(13,m)}))},function(e){P[e?"unshift":"push"]((()=>{y=e,n(14,y)}))},function(e){P[e?"unshift":"push"]((()=>{$=e,n(15,$)}))},function(e){P[e?"unshift":"push"]((()=>{k=e,n(16,k)}))},function(e){P[e?"unshift":"push"]((()=>{v=e,n(17,v)}))},function(e){P[e?"unshift":"push"]((()=>{b=e,n(18,b)}))}]}class xt extends ge{constructor(e){super(),de(this,e,wt,it,a,{units:0,choose:1,places:22},[-1,-1,-1])}}function _t(e,t,n){const l=e.slice();return l[6]=t[n],l}function Ct(e){let t,n,l=Object.keys(e[6])[0]+"";return{c(){t=$("li"),n=k(l),w(t,"class","svelte-1qdtztt")},m(e,l){g(e,t,l),d(t,n)},p(e,t){1&t&&l!==(l=Object.keys(e[6])[0]+"")&&x(n,l)},d(e){e&&m(t)}}}function Ot(t){let n,l,i,o,s,a,c,r,u,f,h,p=t[0].faction.name+"",v=t[0].doom+"",_=t[0].power+"",C=t[0].books.length+"",O=t[0].faction.bookreqs,j=[];for(let e=0;e<O.length;e+=1)j[e]=Ct(_t(t,O,e));return{c(){n=$("div"),l=k(p),i=k(" | dm "),o=k(v),s=k(" | pw "),a=k(_),c=k(" | sb "),r=k(C),u=$("ul");for(let e=0;e<j.length;e+=1)j[e].c();w(u,"class","details svelte-1qdtztt"),w(n,"class","player2 svelte-1qdtztt")},m(e,p){g(e,n,p),d(n,l),d(n,i),d(n,o),d(n,s),d(n,a),d(n,c),d(n,r),d(n,u);for(let e=0;e<j.length;e+=1)j[e].m(u,null);t[4](n),f||(h=b(n,"click",t[2]),f=!0)},p(e,[t]){if(1&t&&p!==(p=e[0].faction.name+"")&&x(l,p),1&t&&v!==(v=e[0].doom+"")&&x(o,v),1&t&&_!==(_=e[0].power+"")&&x(a,_),1&t&&C!==(C=e[0].books.length+"")&&x(r,C),1&t){let n;for(O=e[0].faction.bookreqs,n=0;n<O.length;n+=1){const l=_t(e,O,n);j[n]?j[n].p(l,t):(j[n]=Ct(l),j[n].c(),j[n].m(u,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=O.length}},i:e,o:e,d(e){e&&m(n),y(j,e),t[4](null),f=!1,h()}}}function jt(e,t,n){let l,{choose:i}=t,{player:o}=t;T();N((e=>{n(1,l.style.background="linear-gradient(70deg,#363636,"+o.faction.color+")",l)}));return e.$$set=e=>{"choose"in e&&n(3,i=e.choose),"player"in e&&n(0,o=e.player)},[o,l,e=>{e.stopPropagation(),i("player",o)},i,function(e){P[e?"unshift":"push"]((()=>{l=e,n(1,l)}))}]}class Bt extends ge{constructor(e){super(),de(this,e,jt,Ot,a,{choose:3,player:0})}}const Rt=(e="",t=[],n=!1,l=0)=>({name:e,adjacent:t,ocean:n,gate:l}),zt=Rt("arcticocean",["northamerica","northatlantic","northpacific","scandinavia","northasia"],!0),St=Rt("northpacific",["arcticocean","northamerica","southamerica","indianocean","southpacific","northasia","southasia"]),qt=Rt("northamerica",["southamerica","northatlantic","accrticocean","northpacific"]),Et=Rt("northatlantic",["southamerica","northamerica","southatlantic","northpacific","arcticocean","europe","westafrica","arabia","scandinavia"],!0),At=Rt("scandinavia",["arcticocean","northatlantic","europe","northasia"]),Mt=Rt("europe",["northatlantic","arabia","northasia","scandinavia"]),Nt=Rt("northasia",["arcticocean","scandinavia","europe","arabia","southasia","northpacific"]),Tt=Rt("arabia",["eastafrica","westafrica","europe","southasia","indianocean","northasia","northatlantic"]),Dt=Rt("southasia",["arabia","northasia","northpacific","indianocean"]),Pt=Rt("southamerica",["northpacific","southpacific","northatlantic","southatlantic","northamerica"]),Ht=Rt("westafrica",["eastafrica","southatlantic","northatlantic","arabia","indianocean"]),Ft=Rt("indianocean",["northpacific","southasia","arabia","eastafrica","westafrica","antarctica","southatlantic","southpacific"],!0),Yt=Rt("southpacific",["australia","indianocean","northpacific","antarctica","southamerica","southpatlantic"],!0),Gt=Rt("southatlantic",["southpacific","southamerica","northatlantic","antarctica","eastafrica","westafrica"],!0),Ut=Rt("eastafrica",["southatlantic","westafrica","arabia","indianocean"]),Kt=Rt("australia",["indianocean","southpacific"]),Lt={arcticocean:zt,northpacific:St,northamerica:qt,northatlantic:Et,scandinavia:At,europe:Mt,northasia:Nt,southamerica:Pt,southasia:Dt,arabia:Tt,westafrica:Ht,indianocean:Ft,eastafrica:Ut,antarctica:Rt("antarctica",["indianocean","southatlantic","southpacific"]),southatlantic:Gt,southpacific:Yt,australia:Kt};let It=e=>({books:["Blood Sacrifice","Frenzy","Ghroth","Necrophagy","The Red Sign","The Thousand Young"],bookreqs:[{"sac 2 cults":e=>!1},{"be in 4 areas":t=>Object.keys(e.places).filter((t=>e.player.units.map((e=>e.place)).includes(t))).length>3},{"be in 6 areas":t=>Object.keys(e.places).filter((t=>e.player.units.map((e=>e.place)).includes(t))).length>5},{"be in 8 areas":t=>Object.keys(e.places).filter((t=>e.player.units.map((e=>e.place)).includes(t))).length>7},{"Awaken Shub Nigur'rath":t=>"goo"==e.choices.awaken.unit?.type},{"be in all enemy areas":t=>e.players.filter((t=>t.units.filter((t=>Object.keys(e.places).filter((t=>e.player.units.map((e=>e.place)).includes(t))).includes(t.place))).length)).length==e.players.length}],goo:"Shub Nigur'rath",mons:{Ghoul:2,Fungi:4,"Dark Young":2},color:"red",start:"westafrica",name:"bg",units:[],addUnit:(e,t)=>{e.owner=t,t.units=[...t.units,e]}}),Wt=e=>{let t=[{"pay 4 pwoer":e=>!1},{"pay 6 pwoer":e=>!1},{"3 gates / 12 power":t=>e.player.units.filter((e=>e.gate)).length>2||e.player.power>11},{"4 gates / 16 power":t=>e.player.units.filter((e=>e.gate)).length>3||e.player.power>15},{capture:t=>n.filter((t=>t.place==e.player.faction)).length},{"Awaken Nyarlathotap":t=>"Nyarlathotap"==e.choices.awaken.unit?.name}],n=[];return{books:["Abduct","Emissary of the Outer Gods","Invisibility","Madness","Seek and Destroy","The Thousand Forms"],bookreqs:t,goo:"Nyarlathotap",mons:{Nightgaunt:3,"Hunting Horror":2,"Flying Polyp":3},color:"blue",start:"southasia",name:"cc",units:n,addUnit:(e,t)=>{e.owner=t,t.units=[...t.units,e]}}},Zt=e=>{let t=Object.keys(e.places).filter((t=>e.places[t].oceans));return{books:["Absorb","Devolve","Dreams","Regenerate","Submerge","Y'hn Nthlei"],bookreqs:[{"1st doom":t=>"doom"==e.phase},{"kill/devour enemy":t=>e.choices.fight.enemy?.kills+e.choices.fight.enemy?.devour==1||e.choices.fight.enemy?.kills+e.choices.fight.enemy?.devour==3},{"kill/devour 2 enemies":t=>e.choices.fight.enemy?.kills+e.choices.fight.enemy?.devour==2||e.choices.fight.enemy?.kills+e.choices.fight.enemy?.devour==3},{"3/4 Ocean Gates":n=>e.player.units.filter((e=>e.gate&&t.includes(e.place))).length>2||Object.values(e.places).filter((e=>e.ocean&&e.gate)).length>3},{"Awaken Cthulhu":t=>"goo"==e.choices.awaken.unit?.type},{"doom + 5 books":t=>"doom"==e.phase&&5==e.player.books.length}],goo:"Cthulhu",mons:{"Deep One":4,Shoggoth:2,Starspawn:2},color:"green",start:"southpacific",name:"gc",units:[],addUnit:(e,t)=>{e.owner=t,t.units=[...t.units,e]}}},Jt=e=>({books:["He Who Must Not Be Named","Passion","Shriek of the Byakhee","The Screaming Dead","The Third Eye","Zin Gaya"],bookreqs:[{"gift 3 doom":e=>!1},{"Desecrate \\|/":t=>Object.values(e.places).filter((e=>e.desecrated&&e.glyphs["\\|/"])).length},{"Desecrate \\o/":t=>Object.values(e.places).filter((e=>e.desecrated&&e.glyphs["\\o/"])).length},{"Desecrate \\-/":t=>Object.values(e.places).filter((e=>e.desecrated&&e.glyphs["\\-/"])).length},{"Awaken King in Yellow":t=>"King in Yellow"==e.choices.awaken.unit?.name},{"Awaken Hastur":t=>"Hastur"==e.choices.awaken.unit?.name}],goo:["King in Yellow","Hastur"],mons:{Undead:2,"Bya'khee":4},color:"yellow",start:"europe",name:"ys",units:[],addUnit:(e,t)=>{e.owner=t,t.units=[...t.units,e]}});function Qt(e,t,n){const l=e.slice();return l[2]=t[n],l}function Vt(e,t,n){const l=e.slice();return l[33]=t[n],l}function Xt(e){let t,n,l,i,o=e[33]+"";function s(...t){return e[4](e[33],...t)}return{c(){t=$("li"),n=k(o),w(t,"class","svelte-1e8e8gy")},m(e,o){g(e,t,o),d(t,n),l||(i=b(t,"click",s),l=!0)},p(t,l){e=t,2&l[0]&&o!==(o=e[33]+"")&&x(n,o)},d(e){e&&m(t),l=!1,i()}}}function en(e){let t,n,l,i,o=e[33].type+"";function s(...t){return e[3](e[33],...t)}return{c(){t=$("li"),n=k(o),w(t,"class","svelte-1e8e8gy")},m(e,o){g(e,t,o),d(t,n),l||(i=b(t,"click",s),l=!0)},p(t,l){e=t,2&l[0]&&o!==(o=e[33].type+"")&&x(n,o)},d(e){e&&m(t),l=!1,i()}}}function tn(e){let t,n;function l(e,n){return(null==t||1&n[0])&&(t=!!e[0].stage.includes("unit")),t?en:Xt}let i=l(e,[-1]),o=i(e);return{c(){o.c(),n=v()},m(e,t){o.m(e,t),g(e,n,t)},p(e,t){i===(i=l(e,t))&&o?o.p(e,t):(o.d(1),o=i(e),o&&(o.c(),o.m(n.parentNode,n)))},d(e){o.d(e),e&&m(n)}}}function nn(e){let t,n,l;return{c(){t=$("li"),t.textContent="done",w(t,"class","svelte-1e8e8gy")},m(i,o){g(i,t,o),n||(l=b(t,"click",(function(){s(e[0].phases[e[0].phase].moves.done)&&e[0].phases[e[0].phase].moves.done.apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&m(t),n=!1,l()}}}function ln(e){let t,n,l;return{c(){t=$("li"),t.textContent="done",w(t,"class","svelte-1e8e8gy")},m(i,o){g(i,t,o),n||(l=b(t,"click",(function(){s(e[0].phases[e[0].phase].stages[e[0].stage].moves.done)&&e[0].phases[e[0].phase].stages[e[0].stage].moves.done.apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&m(t),n=!1,l()}}}function on(e){let t,n;return t=new Bt({props:{choose:e[0].choose,player:e[2]}}),{c(){ue(t.$$.fragment)},m(e,l){fe(t,e,l),n=!0},p(e,n){const l={};1&n[0]&&(l.choose=e[0].choose),1&n[0]&&(l.player=e[2]),t.$set(l)},i(e){n||(ne(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){he(t,e)}}}function sn(e){let t,l,i,o,s,a,c;const r=[e[0]];let u={};for(let e=0;e<r.length;e+=1)u=n(u,r[e]);t=new xt({props:u});let f=e[1],h=[];for(let t=0;t<f.length;t+=1)h[t]=tn(Vt(e,f,t));function p(e,t){return e[0].phases[e[0].phase].stages&&e[0].phases[e[0].phase].stages[e[0].stage].moves.done?ln:e[0].phases[e[0].phase].moves&&e[0].phases[e[0].phase].moves.done?nn:void 0}let b=p(e),x=b&&b(e),_=e[0].players,C=[];for(let t=0;t<_.length;t+=1)C[t]=on(Qt(e,_,t));const O=e=>le(C[e],1,1,(()=>{C[e]=null}));return{c(){ue(t.$$.fragment),l=$("div"),i=$("div"),o=k("actions"),s=$("ul");for(let e=0;e<h.length;e+=1)h[e].c();a=v(),x&&x.c();for(let e=0;e<C.length;e+=1)C[e].c();w(s,"class","svelte-1e8e8gy"),w(i,"class","actions svelte-1e8e8gy"),w(l,"class","hud svelte-1e8e8gy")},m(e,n){fe(t,e,n),g(e,l,n),d(l,i),d(i,o),d(i,s);for(let e=0;e<h.length;e+=1)h[e].m(s,null);d(s,a),x&&x.m(s,null);for(let e=0;e<C.length;e+=1)C[e].m(l,null);c=!0},p(e,n){const i=1&n[0]?function(e,t){const n={},l={},i={$$scope:1};let o=e.length;for(;o--;){const s=e[o],a=t[o];if(a){for(const e in s)e in a||(l[e]=1);for(const e in a)i[e]||(n[e]=a[e],i[e]=1);e[o]=a}else for(const e in s)i[e]=1}for(const e in l)e in n||(n[e]=void 0);return n}(r,[(o=e[0],"object"==typeof o&&null!==o?o:{})]):{};var o;if(t.$set(i),3&n[0]){let t;for(f=e[1],t=0;t<f.length;t+=1){const l=Vt(e,f,t);h[t]?h[t].p(l,n):(h[t]=tn(l),h[t].c(),h[t].m(s,a))}for(;t<h.length;t+=1)h[t].d(1);h.length=f.length}if(b===(b=p(e))&&x?x.p(e,n):(x&&x.d(1),x=b&&b(e),x&&(x.c(),x.m(s,null))),1&n[0]){let t;for(_=e[0].players,t=0;t<_.length;t+=1){const i=Qt(e,_,t);C[t]?(C[t].p(i,n),ne(C[t],1)):(C[t]=on(i),C[t].c(),ne(C[t],1),C[t].m(l,null))}for(ee(),t=_.length;t<C.length;t+=1)O(t);te()}},i(e){if(!c){ne(t.$$.fragment,e);for(let e=0;e<_.length;e+=1)ne(C[e]);c=!0}},o(e){le(t.$$.fragment,e),C=C.filter(Boolean);for(let e=0;e<C.length;e+=1)le(C[e]);c=!1},d(e){he(t,e),e&&m(l),y(h,e),x&&x.d(),y(C,e)}}}let an=!0;function cn(e,t,n){let l,i,o,s={choices:i,players:undefined,player:o,places:Lt,phases:undefined,turn:undefined,phase:undefined,stage:undefined,units:undefined};l=(e=>({bg:It(e),cc:Wt(e),gc:Zt(e),ys:Jt(e)}))(s);let a=e=>c++,c=0;s.players=Object.values(l).map((e=>((e="",t=[],n=0,l=0)=>({units:t,faction:e,doom:n,power:l,books:[]}))(e))),s.players.map((e=>{e.units=Array(6).fill(null).map((t=>((e="",t={},n="",l=0,i=0,o=0,s=0)=>({id:a(),type:e,owner:t,place:n,cost:l,fight:i,gather:s,tier:o,gate:0}))("cult",e,e.faction.start))),e.units[2].gate=e.faction.start,Lt[e.faction.start].gate=1,e.power=8})),s.turn={lim:1,pi:0},s.choices={book:{book:null},awaken:{unit:null,place:null},move:{unit:null,place:null},fight:{place:null,enemy:null},hire:{place:null},open:{place:null},summon:{unit:null,place:null},steal:{place:null,unit:null}},s.phase="action";let r=[];s.stage="";let u=e=>{n(0,s.turn.lim=1,s),n(0,s.turn.pi++,s),n(0,s.phase=s.players.filter((e=>e.power)).length?"action":"gather",s)},f=e=>{},h=()=>s.players.map((e=>e.faction.bookreqs.map(((t,l)=>{Object.values(t)[0]()&&(e.faction.bookreqs[l]={"waiting...":e=>!1},((e,t,l)=>{let i=""+s.phase,o=""+s.stage,a=0+s.turn.pi;f=e=>{n(0,s.phase=i,s),n(0,s.stage=o,s),n(0,s.turn.pi=a,s)},n(0,s.phase=e,s),n(0,s.stage=t,s),n(0,s.turn.pi=l,s)})("book","book",s.players.indexOf(e)))})))),p=e=>{n(0,s.stage=e,s)},d=e=>{s.phases[s.phase].stages[s.stage].next?p(s.phases[s.phase].stages[s.stage].next):m()},g=e=>{n(0,s.phase=e,s),n(0,s.stage=s.phases[s.phase].start,s),h()},m=e=>{s.phases[s.phase].lim&&n(0,s.turn.lim--,s),n(0,s.phase=s.phases[s.phase].next?s.phases[s.phase].next:"action",s),n(0,s.stage="",s),h(),console.log(s.phases.action.options().length),"action"!=s.phase||s.phases.action.options().length||u()};s.phases={action:{start:"",options:e=>Object.keys(s.phases).filter((e=>s.phases[e].unlim||s.phases[e].lim&&s.turn.lim)),moves:{choose:(e,t)=>{""==e&&g(t)},done:(e,t)=>{n(0,s.player.power=0,s),u()}}},move:{lim:an,start:"unit",stages:{unit:{next:"place",options:e=>s.player.units.filter((e=>s.places[e.place]&&!e.moved)),moves:{choose:(e,t)=>{"unit"==e&&s.player.units.filter((e=>s.places[e.place])).map((e=>e.id)).includes(t.id)&&(n(0,s.choices.move.unit=t,s),d())},done:e=>{m(),s.player.units.map((e=>e.moved=0))}}},place:{next:"unit",options:e=>s.places[s.choices.move.unit.place].adjacent,moves:{choose:(e,t)=>{"place"==e&&s.places[s.choices.move.unit.place].adjacent.includes(t)&&(n(0,s.choices.move.place=t,s),n(0,s.choices.move.unit.gate=0,s),n(0,s.choices.move.unit.place=t,s),n(0,s.choices.move.unit.moved=1,s),n(0,s.player.power--,s),n(0,s.choices.move.unit=null,s),n(0,s.choices.move.place=null,s),k(),0==s.player.power?(m(),s.player.units.map((e=>e.moved=0))):d())}}}}},fight:{lim:an,start:"place",stages:{place:{next:"enemy",options:e=>Object.keys(s.places).filter((e=>s.player.units.filter((t=>t.place==e&&0!=t.fight)).length)),moves:{choose:(e,t)=>{"place"==e&&Object.keys(s.places).filter((e=>s.player.units.filter((t=>t.place==e&&0!=t.fight)).length)).includes(t)&&(n(0,s.choices.fight.place=t,s),d())}}},enemy:{next:"assignpkills",options:e=>s.players.filter((e=>e.faction.name!=s.player.faction.name&&e.units.filter((e=>e.place==s.choices.fight.place)).length)),moves:{choose:(e,t)=>{"enemy"==e&&s.players.filter((e=>e.faction.name!=s.player.faction.name&&e.units.filter((e=>e.place==s.choices.fight.place)).length))&&(n(0,s.choices.fight.enemy=t,s),$(s.player),$(s.choices.fight.enemy),n(0,s.player.power--,s),m())}}},assignpkills:{next:"assignpretreats",options:e=>s.player.units.filter((e=>e.place==s.choices.fight.place)),moves:{choose:(e,t)=>{s.player.units.filter((e=>e.place==s.choices.fight.place)).map((e=>e.id)).includes(t.id)&&(t.place="",n(0,s.player.kills--,s),k()),s.player.kills&&s.player.units.filter((e=>e.place==s.choices.fight.place)).length||d()}}},assignpretreats:{next:"placepretreats",options:e=>s.player.units.filter((e=>e.place==s.choices.fight.place)),moves:{choose:(e,t)=>{s.player.units.filter((e=>e.place==s.choices.fight.place)).map((e=>e.id)).includes(t.id)&&(n(0,s.choice.fight.unit=t,s),d())}}},placepretreats:{next:"assignekills",options:e=>s.places[s.choices.fight.unit.place].adjacent.filter((e=>!s.choices.fight.enemy.units.map((e=>e.place)).includes(e))),moves:{choose:(e,t)=>{s.places[s.choices.fight.unit.place].adjacent.filter((e=>!s.choices.fight.enemy.units.map((e=>e.place)).includes(e))).includes(t)&&(n(0,s.choices.fight.unit.place=t,s),n(0,s.player.pains--,s),k()),s.player.pains&&s.player.units.filter((e=>e.place==s.choices.fight.place)).length?p("assignpretreats"):d()}}},assignekills:{next:"assigneretreats",options:e=>s.choices.fight.enemy.units.filter((e=>e.place==s.choices.fight.place)),moves:{choose:(e,t)=>{s.choices.fight.enemy.units.filter((e=>e.place==s.choices.fight.place)).map((e=>e.id)).includes(t.id)&&(t.place="",n(0,s.choices.fight.enemy.kills--,s),k()),s.choices.fight.enemy.kills&&s.choices.fight.enemy.units.filter((e=>e.place==s.choices.fight.place)).length||d()}}},assigneretreats:{next:"placeeretreats",options:e=>s.choices.fight.enemy.units.filter((e=>e.place==s.choices.fight.place)),moves:{choose:(e,t)=>{s.choices.fight.enemy.units.filter((e=>e.place==s.choices.fight.place)).map((e=>e.id)).includes(t.id)&&(n(0,s.choice.fight.unit=t,s),d())}}},placeeretreats:{options:e=>s.places[i.fight.unit.place].adjacent.filter((e=>!s.player.units.map((e=>e.place)).includes(e))),moves:{choose:(e,t)=>{s.places[i.fight.unit.place].adjacent.filter((e=>!o.units.map((e=>e.place)).includes(e))).includes(t)&&(n(0,s.choices.fight.unit.place=t,s),n(0,s.choices.fight.enemy.pains--,s),k()),s.choices.fight.enemy.pains&&s.choices.fight.enemy.units.filter((e=>e.place==s.choices.fight.place)).length?p("assignpretreats"):(m(),n(0,s.choices.fight.place=null,s),n(0,s.choices.fight.enemy=null,s),n(0,s.choices.fight.unit=null,s))}}}}},hire:{lim:an,start:"place",stages:{place:{options:e=>Object.keys(s.places).filter((e=>s.player.units.map((e=>e.places)).includes(e))),moves:{choose:(e,t)=>{if("place"==e&&s.player.units.map((e=>e.places)).includes(t)){n(0,s.choices.hire.place=t,s);let e=s.player.units.find((e=>""==e.place&&"cult"==e.type));e||g("action"),e.place=t,n(0,s.player.power--,s),n(0,s.choices.hire.place=null,s),m()}}}}}},open:{lim:an,start:"place",stages:{place:{options:e=>Object.keys(s.places).filter((e=>!s.places[e].gate&&s.player.units.filter((e=>"cult"==e.type)).map((e=>e.place)).includes(e))),moves:{choose:(e,t)=>{"place"==e&&s.player.units.filter((e=>"cult"==e.type)).map((e=>e.place)).includes(t)&&(n(0,s.choices.open.place=t,s),n(0,s.places[i.open.place].gate=1,s),n(0,s.player.power-=3,s),m())}}}}},summon:{lim:an,start:"unit",stages:{unit:{next:"place",options:e=>s.player.units.filter((e=>!s.places[e.place]&&e.cost<=s.player.power)),moves:{choose:(e,t)=>{"unit"==e&&!s.places[t.place]&&t.cost<=s.player.power&&(n(0,s.choices.summon.unit=t,s),d())},done:e=>{m()}}},place:{options:e=>s.player.units.filter((e=>e.gate)).map((e=>e.place)),moves:{choose:(e,t)=>{"place"==e&&s.player.units.filter((e=>e.gate)).map((e=>e.place)).includes(t)&&(n(0,s.choices.summon.place=t,s),n(0,s.choices.summon.unit.place=t,s),n(0,s.player.power-=i.summon.unit.cost,s),n(0,s.choices.summon.unit=null,s),n(0,s.choices.summon.place=null,s),k(),d())}}}}},steal:{lim:an,start:"place",stages:{place:{next:"unit",options:e=>Object.keys(s.places).filter((e=>y(e).length)),moves:{choose:(e,t)=>{"place"==e&&y(t).length&&(n(0,s.choices.steal.place=t,s),d())}}},unit:{options:e=>y(s.choices.steal.place),moves:{choose:(e,t)=>{"unit"==e&&y(s.choices.steal.place).map((e=>e.id)).includes(t.id)&&(n(0,s.choices.steal.unit=t,s),t.place=o.faction.name,n(0,s.choices.steal.unit=null,s),n(0,s.choices.steal.place=null,s),m())}}}}},book:{start:"book",stages:{book:{options:e=>s.player.faction.books,moves:{choose:(e,t)=>{"book"==e&&s.player.faction.books.includes(t)&&(n(0,s.choices.book.book=t,s),n(0,s.player.books=[...s.player.books,s.choices.book.book],s),n(0,s.player.faction.bookreqs=s.player.faction.bookreqs.filter((e=>!e["waiting..."])),s),n(0,s.player.faction.books=s.player.faction.books.filter((e=>e!=s.choices.book.book)),s),f())}}}}}};let y=e=>{let t=[];return s.players.map((n=>{t=[...s.units,...n.units.filter((t=>t.place==e))]})),dom=[],t.map((e=>dom[e.owner.faction.name]=dom[e.owner.faction.name]<e.tier?e.tier:dom[e.owner.faction.name])),t.filter((e=>e.tier=0)),t},$=e=>{let t=roll(e.units.filter((e=>e.place==i.fight.place)).map((e=>"function"==typeof e.combat?e.combat():e.combat)));e.kills=t.filter((e=>e>4)).length,e.pains=t.filter((e=>e<5&&e>2)).length},k=e=>{n(0,s),n(0,s)};return e.$$.update=()=>{1&e.$$.dirty[0]&&n(0,s.player=s.players[s.turn.pi%s.players.length],s),1&e.$$.dirty[0]&&n(0,s.units=s.players.reduce(((e,t)=>[...e,...t.units]),[]),s),1&e.$$.dirty[0]&&n(0,s.choose=""==s.stage?s.phases[s.phase].moves.choose:s.phases[s.phase].stages[s.stage].moves.choose,s),1&e.$$.dirty[0]&&n(1,r=""==s.stage?s.phases[s.phase].options():s.phases[s.phase].stages[s.stage].options())},[s,r,o,function(e){s.choose(s.stage,e)},function(e){s.choose(s.stage,e)}]}class rn extends ge{constructor(e){super(),de(this,e,cn,sn,a,{},[-1,-1])}}function un(t){let n,l,i;return l=new rn({}),{c(){n=$("div"),ue(l.$$.fragment),w(n,"class","world svelte-rsr18")},m(e,t){g(e,n,t),fe(l,n,null),i=!0},p:e,i(e){i||(ne(l.$$.fragment,e),i=!0)},o(e){le(l.$$.fragment,e),i=!1},d(e){e&&m(n),he(l)}}}return new class extends ge{constructor(e){super(),de(this,e,null,un,a,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
